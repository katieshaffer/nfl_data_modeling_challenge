version: 2
models:
  - name: int_fantasy_points
    description: >
      Intermediate model aggregating player-level fantasy performance metrics,
      enriched with moon phase data.
    columns:
      - name: player_id
        description: Unique identifier for the player.
        meta:
          dimension:
            type: string
      - name: player_name
        description: Name of the player.
        meta:
          dimension:
            type: string
      - name: position
        description: Player's position (e.g., QB, RB, WR, TE).
        meta:
          dimension:
            type: string
      - name: recent_team
        description: The player's most recent team.
        meta:
          dimension:
            type: string
      - name: season
        description: Season year for the stats.
        meta:
          dimension:
            type: number
      - name: season_week
        description: Week number in the season for these stats.
        meta:
          dimension:
            type: number
      - name: total_targets
        description: >-
          Total number of passing targets the player received in the aggregated
          period.
        meta:
          dimension:
            type: number
      - name: total_fantasy_points
        description: Sum of all standard fantasy points scored by the player.
        meta:
          dimension:
            type: number
      - name: total_fantasy_points_ppr
        description: >-
          Sum of all fantasy points scored by the player under PPR (points per
          reception) rules.
        meta:
          dimension:
            type: number
      - name: games_played
        description: Count of distinct games (weeks) the player participated in.
        meta:
          dimension:
            type: number
      - name: avg_fantasy_points_per_game
        description: Average standard fantasy points scored by the player per game.
        meta:
          dimension:
            type: number
      - name: avg_fantasy_points_ppr_per_game
        description: Average PPR fantasy points scored by the player per game.
        meta:
          dimension:
            type: number
      - name: current_moon_phase
        description: Moon phase during the game
        meta:
          dimension:
            type: string
      - name: moon_phase_timestamp
        description: Timestamp of the most recent moon phase before the game
        meta:
          dimension:
            type: timestamp
  - name: int_red_zone_plays
    description: >-
      Intermediate model extracting plays that occur in the red zone, excluding
      certain penalties and non-plays.
    columns:
      - name: play_id
        description: Unique identifier for each play.
        meta:
          dimension:
            type: number
      - name: fantasy_player_id
        description: Unique fantasy-related identifier for the player involved in the play.
        meta:
          dimension:
            type: string
      - name: fantasy_player_name
        description: >-
          Name of the player involved in the play, relevant for fantasy
          purposes.
        meta:
          dimension:
            type: string
      - name: play_type
        description: Type of play (e.g., run, pass).
        meta:
          dimension:
            type: string
      - name: incomplete_pass
        description: Flag (0/1) indicating if the pass was incomplete.
        meta:
          dimension:
            type: number
      - name: complete_pass
        description: Flag (0/1) indicating if the pass was completed.
        meta:
          dimension:
            type: number
      - name: pass_attempt
        description: Flag (0/1) indicating if a pass attempt was made.
        meta:
          dimension:
            type: number
      - name: rush
        description: Flag (0/1) indicating if the play involved a rush.
        meta:
          dimension:
            type: number
      - name: rush_attempt
        description: Flag (0/1) indicating a rushing attempt counted for stats.
        meta:
          dimension:
            type: number
      - name: touchdown
        description: Flag (0/1) if the play resulted in a touchdown.
        meta:
          dimension:
            type: number
      - name: penalty
        description: Flag (0/1) if a penalty occurred on this play.
        meta:
          dimension:
            type: number
      - name: penalty_type
        description: Type of penalty called during this play, if any.
        meta:
          dimension:
            type: string
      - name: possession_team
        description: ""
        meta:
          dimension:
            type: string
  - name: int_nfl_games_enhanced
    description: >
      Enriched NFL games data including team full names and moon phases. Each
      row represents a single NFL game with additional context.
    columns:
      - name: round_number
        description: Week number in the NFL season
        meta:
          dimension:
            type: number
      - name: game_date
        description: Date of the game
        meta:
          dimension:
            type: date
      - name: game_time
        description: Start time of the game
        meta:
          dimension:
            type: timestamp
      - name: game_timestamp
        description: Combined date and time of the game
        meta:
          dimension:
            type: timestamp
      - name: location
        description: Stadium where the game was played
        meta:
          dimension:
            type: string
      - name: home_team
        description: Home team abbreviation
        meta:
          dimension:
            type: string
      - name: home_team_name
        description: Home team full name
        meta:
          dimension:
            type: string
      - name: home_team_score
        description: Points scored by home team
        meta:
          dimension:
            type: number
      - name: away_team
        description: Away team abbreviation
        meta:
          dimension:
            type: string
      - name: away_team_name
        description: Away team full name
        meta:
          dimension:
            type: string
      - name: away_team_score
        description: Points scored by away team
        meta:
          dimension:
            type: number
      - name: winning_team
        description: Abbreviation of the winning team
        meta:
          dimension:
            type: string
      - name: losing_team
        description: Abbreviation of the losing team
        meta:
          dimension:
            type: string
      - name: total_points
        description: Total points scored in the game
        meta:
          dimension:
            type: number
      - name: current_moon_phase
        description: Moon phase at the time of the game
        meta:
          dimension:
            type: string
      - name: moon_phase_timestamp
        description: Timestamp of the most recent moon phase before the game
        meta:
          dimension:
            type: timestamp
